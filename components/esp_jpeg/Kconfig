menu "JPEG Decoder"

    config JD_USE_EXT
        bool "Use external TinyJPG Decoder instead of ROM code."
        default n if IDF_TARGET_ESP32
        default n if IDF_TARGET_ESP32S3
        default n if IDF_TARGET_ESP32C2
        default n if IDF_TARGET_ESP32C3
        default n if IDF_TARGET_ESP32H2
        default y if IDF_TARGET_ESP32S2

    config JD_SZBUF
        int "Specifies size of stream input buffer."
        depends on JD_USE_EXT
        default 512

    config JD_FORMAT
        int
        depends on JD_USE_EXT
        default 0 if JD_FORMAT_RGB888
        default 1 if JD_FORMAT_RGB565   
        default 2 if JD_FORMAT_GREYSCALE   
        
        choice 
            prompt "Selection of output pixel format"
            depends on JD_USE_EXT
            default JD_FORMAT_RGB565

        config JD_FORMAT_RGB888
            bool "RGB888 (24-bit/pix)"
        config JD_FORMAT_RGB565
            bool "RGB565 (16-bit/pix)"
        config JD_FORMAT_GREYSCALE
            bool "Grayscale (8-bit/pix)"
        endchoice

    config JD_USE_SCALE
        bool "Switches output descaling feature."
        depends on JD_USE_EXT
        default y
        
    config JD_TBLCLIP
        bool "Use table conversion for saturation arithmetic. A bit faster, but increases 1 KB of code size."
        depends on JD_USE_EXT
        default y

    config JD_FASTDECODE
        int
        depends on JD_USE_EXT
        default 0 if JD_FASTDECODE_BASIC
        default 1 if JD_FASTDECODE_32BIT   
        default 2 if JD_FASTDECODE_TABLE   
        
        choice 
            prompt "Optimization level."
            depends on JD_USE_EXT
            default JD_FASTDECODE_32BIT

        config JD_FASTDECODE_BASIC
            bool "Basic optimization. Suitable for 8/16-bit MCUs."
        config JD_FASTDECODE_32BIT
            bool "+ 32-bit barrel shifter. Suitable for 32-bit MCUs."
        config JD_FASTDECODE_TABLE
            bool "+ Table conversion for huffman decoding (wants 6 << HUFF_BIT bytes of RAM)"
        endchoice
endmenu
